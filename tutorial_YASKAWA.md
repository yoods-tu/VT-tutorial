| VTチュートリアル ロボット接続編〜安川電機版 | Revision       | 第2版 |
| ------------------------------------------- | -------------- | ----- |
| 作成者                                      | 株式会社YOODS  |       |
| 作成日                                      | 2020年10月1日  |       |
| 最終更新日                                  | 2023年12月26日 |       |

# 7.  グローバル変数設定

| No   | 手順                                                                                                                                                                                                                                                                                                                                                                | 補足                                                                                                                                                                                                                                                                                                                      |
| ---- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| A140 | TPで変数→I変数(整数型)を<br />選択してください。                                                                                                                                                                                                                                                                                                                   | 別紙「ロボットグローバル変数表」を参照して<br />作業を進めてください。                                                                                                                                                                                                                                                    |
| A141 | I 081〜I 086に右記の数値を<br />設定してください。 <br /><br />  このアドレスが有効になるのは <br />再起動以降です。 <br /><br />  ※A114で設定したPCのIPアドレスを <br />　入力してください。                                                                                                                                                                      | 番号　入力する数値　　　説明<br />081　　11000 　　　　　#ポート番号(軸情報) <br />082 　　192 　　　　　　#IPアドレス① <br />083 　　168 　　　　　   #IPアドレス② <br />084 　　221 　　　　　   #IPアドレス③ <br />085　　 2 　　　　　　　#IPアドレス④ <br />086 　　3333 　　　　　 #ポート番号(VTコマンド) |
| A142 | I 087はショートカットキーでカメラ処理を<br />行うための汎用出力を割り当てる設定です。 <br /><br />  右図の②を確認し、5桁の数値を 入力してください。 <br />※ショートカットキーを使用しない場合も <br />空いている汎用出力番号を確認して <br />設定してください。 <br />すでに使用している出力番号とかぶると <br />正しくON,OFF出来なくなります。<br /><br /><br /> | ① 汎用出力番号<br />② I変数(I 087)へ設定する５桁の数値<br /><br />                  ![1724288995822](https://file+.vscode-resource.vscode-cdn.net/c%3A/Users/tuchiyama/Desktop/md_manual/image/tutorial_YASKAWA/1724288995822.png)                                                                      |
| A143 | I 088はリトライ機能を使用する場合に<br />設定してください。 <br /><br />  使用しない場合は「１」を設定。 <br />使用する場合は「２以上」を設定してください。                                                                                                                                                                                                         | リトライ機能は撮影後に<br />設定した回数、解析のみを行います。 <br />１回目で解析結果OKが出れば <br />その時点で解析は終了し、 <br />それ以上解析は行いません。 <br />NGが出た場合はOKが出るまで、 <br />または、設定回数到達まで解析を行います。                                                                         |
| A144 | TPで変数→B変数(バイト型)を<br />選択してください。                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                                                                                           |
| A145 | B 076はペンダントからショートカットキーで<br />カメラ処理を実行できるようにするものです。<br /><br />  使用しない場合は「0」を、 <br />使用する場合は「1」を設定してください。<br />                                                                                                                                                                                | 設定するとリセット、撮影をショートカットキーで<br />実行できます。                                                                                                                                                                                                                                                        |
| A146 | ショートカットキー設定方法<br /><br />  「コントローラ設定」→「用途キー割付」を <br />選択してください。                                                                                                                                                                                                                                                           | セキュリティを「管理モード」にしてください。                                                                                                                                                                                                                                                                              |
| A147 | 上部メニューの「表示」を押して<br />「単独割付」から「同時押し割付」に <br />切り替えてください。                                                                                                                                                                                                                                                                   |                                                                                                                                                                                                                                                                                                                           |
| A148 | 使用したいキーを選択して<br />「メーカー割付」から「モーメンタリィ出力割付」に <br />切り替えてください。                                                                                                                                                                                                                                                           | ・モーメンタリィ<br />　ボタンを押している間だけONになる <br />・オルタネイト <br />　ボタンを押した後、手を離してもONを保持する                                                                                                                                                                                          |
| 149  | 設定が正しくできていれば<br />「インタロックボタン＋割付したボタン」で <br />リセット、撮影を実行できます。<br />                                                                                                                                                                                                                                                   | 汎用出力画面を開いた状態で <br />ボタンを押して確認してください。                                                                                                                                                                                                                                                         |

# 8.ロボットに必要なソフトウェアをインストール

| No   | 手順                                                                                                                                                                                                                                          | 確認方法                                                                                                                                                                                                                                                                                                                     |
| ---- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| A150 | PCデスクトップ「VTマニュアル」のリンクを選択して<br />ダブルクリックしてください。 <br /><br />  使用するロボットメーカーのフォルダを開き <br />「Robot_program」のフォルダを開いてください。                                                 | ロボットへ必要なプログラムファイルを移行します。<br /><br />  TPのUSB差し込み口は <br />ロボットメーカー取扱い説明書を参照してください。                                                                                                                                                                                     |
| A151 | PCへUSBメモリを挿してください。<br /><br />  選択したフォルダ内のファイルを <br />全てUSBへコピーしてください。 <br /><br />  コピー完了後、USBを抜いてください。                                                                             | USBメモリフォルダは自動で出てきますが<br />出ない場合、ファイルマネージャーを開いて <br />デバイス内のUSBフォルダを開いてください。 <br /><br />  USBを抜く際は、ファイルマネージャー左側メニュー<br />デバイス内にあるUSBの<br />![1724289195515](image/tutorial_YASKAWA/1724289195515.png)マークを押してから抜いてください。 |
| A152 | TPへUSBメモリを挿してください。<br />TP画面の「外部記憶」を選択します。 <br />デバイスがUSB:ペンダントか確認し、 <br />USB内のファイルをTPへロードしてください。 <br /><br />  完了後、USBメモリを抜いてください。                            | ロードするプログラム<br />●CLEAR_POS <br />●RESET_UF_L <br />●ROVI_CAPTURE <br />●ROVI_RECIPE <br />●ROVI_RESET <br />●ROVI_SOLVE <br />●VT_MAIN_SAMPLE <br />●R_CAL_SAMPLE                                                                                                                                          |
| A153 | 次にMotoPlusで使用するプログラムを ロードします。                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                                              |
| A154 | ロボットコントローラをメンテナンスモードで起動。<br />  TPの「メインメニュー」ボタンを押しながら<br />YRC1000microを起動(電源投入)。 <br />メンテナンスモードで起動します。                                                                   | ![1724289349757](image/tutorial_YASKAWA/1724289349757.png)                                                                                                                                                                                                                                                                     |
| A155 | 「MotoPlusアプリ」→「ロード」を開きます <br />「VT.out」を選択し、エンタを押します。<br />                                                                                                                                                   | セキュリティを「管理モード」にしてください。                                                                                                                                                                                                                                                                                 |
| A156 | 再度電源再投入し、 <br />ロボットコントローラを通常モードで起動。 <br />「MotoPlusアプリ」→「MotoPlusモニタ」を選択 <br />アプリケーション起動順序設定を開き、VT.outが <br />有効アプリケーションに設定されているか <br />確認してください。 | 無効アプリケーションになっている場合は、 <br />ファイル選択後、「追加」を押して <br />「設定書込み」を押した後、電源再投入をしてください。                                                                                                                                                                                   |

# 9.  TPでのIPアドレス設定 (YRC1000micro)

| No   | 手順                                                                                                                                                                                                                  | 補足                                                                                                                                         |
| ---- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------- |
| A160 | ロボットのIPアドレスを設定します。<br />ロボットコントローラメンテナンスモードで起動<br /><br />  TPの「メインメニュー」ボタンを押しながら<br />YRC1000microを起動(電源投入)。 <br />メンテナンスモードで起動します。 | ![1724289436653](image/tutorial_YASKAWA/1724289436653.png)                                                                                     |
| A161 | システム→セキュリティを選択して、<br />「管理モード」に変更してください。                                                                                                                                            | ![1724289472709](image/tutorial_YASKAWA/1724289472709.png)                                                                                     |
| A162 | 「システム」→「設定」→「オプション機能」を<br />選択してください。                                                                                                                                                  | ![1724289493364](image/tutorial_YASKAWA/1724289493364.png)                                                                                     |
| A163 | 「LANインターフェイス設定」を選択してください。                                                                                                                                                                       | ![1724289507737](https://file+.vscode-resource.vscode-cdn.net/c%3A/Users/tuchiyama/Desktop/md_manual/image/tutorial_YASKAWA/1724289507737.png) |
| A164 | IPアドレスを設定してください。<br />標準の設定アドレスは <br />192.168.221.10です。                                                                                                                                   | ![1724289535246](image/tutorial_YASKAWA/1724289535246.png)                                                                                     |
| A165 | IPアドレスを設定して[Enter]を押すと<br />右図のように確認ダイアログが表示されます。 <br />「はい」を選択して電源を再投入してください。<br /> 通常モードでロボットが起動します。                                       | ![1724289559365](image/tutorial_YASKAWA/1724289559365.png)                                                                                     |
| A166 | 以上でロボットのIPアドレスの設定は完了です。                                                                                                                                                                          |                                                                                                                                              |

# 10.位置変数（P変数）とユーザ座標の設定

| No   | 手順                                                                                                                                                                                                  | 補足                                                                                                                     |
| ---- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------ |
| A171 | TPで変数→P変数(位置型)を<br />選択してください。                                                                                                                                                     |                                                                                                                          |
| A172 | 使用する変数番号のページを開いてください。<br />デフォルトは「#P090」です。 <br /><br />  「＊＊＊＊＊＊＊＊＊＊＊＊」部分を選んで <br />「ベース」を選択してください。                               | このページに補正量が格納されます。                                                                                       |
| A173 | 続いて、ユーザ座標を設定します。<br />メインメニューの「ロボット」→「ユーザ座標」を <br />選択してください。                                                                                         |                                                                                                                          |
| A174 | 使用する番号にカーソルを合わせ<br />上部メニューの「表示」を選択し、 <br />「座標値」を押してください。                                                                                               | このページに位置変数の値を格納します。 再教示の際は、数値が全て「０」になっている事を 確認してから教示を行ってください。 |
| A175 | ロボットの欄を選んで<br />使用するロボットを選択してください。 <br />「R1:ﾛﾎﾞｯﾄ1」                                                                                                               |                                                                                                                          |
| A176 | ロボットを選択すると画面下部に<br />「反映」ボタンが出てきます。 <br />反映を選択した後、「表示」を押して <br />「一覧」画面に戻ってください。 <br />設定欄が黒丸に変わっていれば設定完了です。<br /> | 数値は全て「０」のまま反映を押してください。<br /> 再教示の時はこの数値が全て「０」の状態で <br />行ってください。       |
| A177 | 設定した位置変数、ユーザ座標の番号は <br />プログラム作成時に必要となります。<br />                                                                                                                   |                                                                                                                          |

# [11.      動作確認]()

| No   | 手順                                                                                                                                         | 確認方法                                                                                                                                                                                                                                                         |
| ---- | -------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| A180 | デスクトップのVT起動アイコンを<br />ダブルクリックして、ビジュアルコントローラを <br />起動します。 <br />※起動済みの場合は、念のため再起動 |                         ![1724289713540](https://file+.vscode-resource.vscode-cdn.net/c%3A/Users/tuchiyama/Desktop/md_manual/image/tutorial_YASKAWA/1724289713540.png)               <br />                       VT起動アイコン |
| A181 | ご使用のロボットが画面に表示されることを<br />確認します。                                                                                   | ![1724289730759](image/tutorial_YASKAWA/1724289730759.png)<br />画面上にロボットが表示されます。                                                                                                                                                                   |
| A182 | TPでロボットを動かし、画面上のロボットと<br />実際のロボットの動きが連動していることを <br />確認してください。                              | 各軸座標系で6軸それぞれを動かし<br />連動しているか確認してください。                                                                                                                                                                                            |

**改定履歴**

| #     | 日付             | 内容     |
| ----- | ---------------- | -------- |
| 初版  | 2020年 10月 1日  |          |
| 第2版 | 2023年 12月 26日 | 誤字修正 |
